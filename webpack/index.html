<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack | 一蓑烟雨、汪汪汪</title>
    <meta name="description" content="一蓑烟雨、汪汪汪的个人站点">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.1d4b736e.css" as="style"><link rel="preload" href="/blog/assets/js/app.5db508ee.js" as="script"><link rel="preload" href="/blog/assets/js/14.4857997b.js" as="script"><link rel="preload" href="/blog/assets/js/3.cc253723.js" as="script"><link rel="prefetch" href="/blog/assets/js/2.f19ade44.js"><link rel="prefetch" href="/blog/assets/js/4.77a583ed.js"><link rel="prefetch" href="/blog/assets/js/5.1434cdce.js"><link rel="prefetch" href="/blog/assets/js/6.c94f8508.js"><link rel="prefetch" href="/blog/assets/js/7.358d37fa.js"><link rel="prefetch" href="/blog/assets/js/8.33a3ec60.js"><link rel="prefetch" href="/blog/assets/js/9.189481da.js"><link rel="prefetch" href="/blog/assets/js/10.3dcf02b0.js"><link rel="prefetch" href="/blog/assets/js/11.a1f6242f.js"><link rel="prefetch" href="/blog/assets/js/12.67239eb0.js"><link rel="prefetch" href="/blog/assets/js/13.2116925f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1d4b736e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一蓑烟雨、汪汪汪</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/interview/" class="nav-link">前端面试之道</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript书籍</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/books/你不知道的javascript/你不知道的javascript上.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-item"><!----> <a href="/blog/books/你不知道的javascript/你不知道的javascript中.html" class="nav-link">你不知道的JavaScript(中)</a></li></ul></div></div><div class="nav-item"><a href="/blog/designPattern/" class="nav-link">JavaScript设计模式</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">数据结构和算法</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-exact-active router-link-active">Webpack</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">CSS奇淫技巧</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">Git</a></div><div class="nav-item"><a href="https://github.com/wangtunan/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/interview/" class="nav-link">前端面试之道</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript书籍</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/books/你不知道的javascript/你不知道的javascript上.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-item"><!----> <a href="/blog/books/你不知道的javascript/你不知道的javascript中.html" class="nav-link">你不知道的JavaScript(中)</a></li></ul></div></div><div class="nav-item"><a href="/blog/designPattern/" class="nav-link">JavaScript设计模式</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">数据结构和算法</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-exact-active router-link-active">Webpack</a></div><div class="nav-item"><a href="/blog/css/" class="nav-link">CSS奇淫技巧</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">Git</a></div><div class="nav-item"><a href="https://github.com/wangtunan/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Webpack</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/webpack/#追本溯源" class="sidebar-link">追本溯源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#面向过程开发" class="sidebar-link">面向过程开发</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#面向对象开发" class="sidebar-link">面向对象开发</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#现代开发模式" class="sidebar-link">现代开发模式</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#webpack初体验" class="sidebar-link">webpack初体验</a></li></ul></li><li><a href="/blog/webpack/#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#全局安装" class="sidebar-link">全局安装</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#卸载" class="sidebar-link">卸载</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#本地安装-推荐" class="sidebar-link">本地安装(推荐)</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#版本号安装" class="sidebar-link">版本号安装</a></li></ul></li><li><a href="/blog/webpack/#起步" class="sidebar-link">起步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#创建项目目录" class="sidebar-link">创建项目目录</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#添加基础代码" class="sidebar-link">添加基础代码</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#安装webpck" class="sidebar-link">安装webpck</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#添加配置文件" class="sidebar-link">添加配置文件</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#改写package-json文件" class="sidebar-link">改写package.json文件</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#第一次打包" class="sidebar-link">第一次打包</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#理解webpack打包输出" class="sidebar-link">理解webpack打包输出</a></li></ul></li><li><a href="/blog/webpack/#打包静态资源" class="sidebar-link">打包静态资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#什么是loader" class="sidebar-link">什么是loader</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#打包图片" class="sidebar-link">打包图片</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#打包样式文件" class="sidebar-link">打包样式文件</a></li></ul></li><li><a href="/blog/webpack/#webpack核心" class="sidebar-link">Webpack核心</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#使用webpackplugin" class="sidebar-link">使用WebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#配置sourcemap" class="sidebar-link">配置SourceMap</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#使用webpackdevserver" class="sidebar-link">使用WebpackDevServer</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#模块热更新-hmr" class="sidebar-link">模块热更新(HMR)</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#处理es6语法" class="sidebar-link">处理ES6语法</a></li></ul></li><li><a href="/blog/webpack/#webpack进阶" class="sidebar-link">Webpack进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#tree-shaking" class="sidebar-link">Tree Shaking</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#区分开发模式和生产模式" class="sidebar-link">区分开发模式和生产模式</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#代码分离-codesplitting" class="sidebar-link">代码分离(CodeSplitting)</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#splitchunksplugin配置参数详解" class="sidebar-link">SplitChunksPlugin配置参数详解</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#lazy-loading懒加载" class="sidebar-link">Lazy Loading懒加载</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#preloading-和prefetching" class="sidebar-link">PreLoading 和Prefetching</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#打包分析" class="sidebar-link">打包分析</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#css代码分隔" class="sidebar-link">Css代码分隔</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#webpack和浏览器缓存" class="sidebar-link">Webpack和浏览器缓存</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#shimming" class="sidebar-link">shimming</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#环境变量的使用" class="sidebar-link">环境变量的使用</a></li></ul></li><li><a href="/blog/webpack/#webpack配置案例" class="sidebar-link">Webpack配置案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack/#library打包" class="sidebar-link">Library打包</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#pwa配置" class="sidebar-link">PWA配置</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#typescript配置" class="sidebar-link">TypeScript配置</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#webpackdevserver请求转发" class="sidebar-link">WebpackDevServer请求转发</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#webpackdevserver单页路由" class="sidebar-link">WebpackDevServer单页路由</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#eslint配置" class="sidebar-link">Eslint配置</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#多页打包" class="sidebar-link">多页打包</a></li><li class="sidebar-sub-header"><a href="/blog/webpack/#webpack性能优化" class="sidebar-link">Webpack性能优化</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack"><a href="#webpack" aria-hidden="true" class="header-anchor">#</a> Webpack <span class="badge tip top" data-v-46355e43>4.0+</span></h1> <div class="tip custom-block"><p class="custom-block-title">概念</p> <p><code>Webpack</code>的核心概念是一个模块打包工具，它的主要目标是将<code>JavaScript</code>文件打包在一起，打包后的文件用于在浏览器中使用，但它也能胜任转换(transform)、打包(bundle)或包裹(package)任何其他资源。</p></div> <h2 id="追本溯源"><a href="#追本溯源" aria-hidden="true" class="header-anchor">#</a> 追本溯源</h2> <p>在学习<code>webpack</code>之前，我们有必要来了解一些前端领域的开发历程，只有明白了这些开发历程，才能更加清楚<code>webpack</code>是怎么应运而生的，又能给我们解决什么样的问题。<br> <strong>PS：</strong> 请确保你安装了<code>Node.js</code>最新版本(<code>webpack4.0+</code>使用了许多最新版<code>Node.js</code>新特性，它极大的提高了打包的速度)。</p> <h3 id="面向过程开发"><a href="#面向过程开发" aria-hidden="true" class="header-anchor">#</a> 面向过程开发</h3> <div class="tip custom-block"><p class="custom-block-title">特征</p> <p>一锅乱炖</p></div> <p>在早期<code>JavaScript</code>能力还非常有限的时候，我们通过面向过程的方式把代码写在同一个<code>.js</code>文件中，一个面向对象开发的过程可能如下所示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// header模块</span>
<span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// sidebar模块</span>
<span class="token keyword">var</span> sidebar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sidebar<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'sidebar'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sidebar<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// content模块</span>
<span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="面向对象开发"><a href="#面向对象开发" aria-hidden="true" class="header-anchor">#</a> 面向对象开发</h3> <div class="tip custom-block"><p class="custom-block-title">特征</p> <p>面向对象开发模式便于代码维护，深入人心。</p></div> <div class="warning custom-block"><p class="custom-block-title">不足</p> <p>在如下的代码示例中，虽然使用面向对象开发模式解决了面向过程开发模式中的一些问题，但似乎又引入了一些新的问题：</p> <ol><li>每一个模块都需要引入一个<code>.js</code>文件，这会影响页面性能</li> <li>在<code>index.js</code>文件中，并不能直接找到模块<code>.js</code>文件的引用关系，必须去页面才能找到</li> <li>在<code>index.html</code>页面中，文件的引入顺序必须严格按顺序来引入，例如：<code>index.js</code>必须放在最后引入，如果把<code>header.js</code>文件放在<code>index.js</code>文件后引入，那么代码会报错</li></ol></div> <p>随着<code>JavaScript</code>的不断发展，它所能解决的问题也越来越多，如果再像面向过程那样把所有代码写在同一个<code>.js</code>文件中，那么代码将变得非常难以理解和维护，此时面向对象开发模式便出现了，一个面向对象开发模式可能如下所示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/header.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/sidebar.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/content.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// header.js</span>
<span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// sidebar.js</span>
<span class="token keyword">function</span> <span class="token function">Sidebar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> sidebar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sidebar<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'sidebar'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sidebar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// content.js</span>
<span class="token keyword">function</span> <span class="token function">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Sidebar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="现代开发模式"><a href="#现代开发模式" aria-hidden="true" class="header-anchor">#</a> 现代开发模式</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>模块化加载方案让前端开发进一步工程化</p></div> <div class="warning custom-block"><p class="custom-block-title">ps</p> <p>以下<code>ES Module</code>模块化加载方案并不能直接在浏览器中运行，因为浏览器并不认识<code>ES Module</code>语法，这个时候<code>Webpack</code>就登场了，<code>Webpack</code>能帮我们把浏览器不能识别的代码转换成能识别的代码。</p></div> <p>根据面向对象开发模式中的一些列问题，随后各种模块化加载的方案如雨后春笋，例如：<code>ES Module</code>、<code>AMD</code>、<code>CMD</code>以及<code>CommonJS</code>等，一个<code>ES Module</code>模块化加载方案可能如下所示：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// header.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// sidebar.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sidebar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> sidebar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sidebar<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'sidebar'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sidebar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// content.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// index.js</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">'./src/header.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Sidebar <span class="token keyword">from</span> <span class="token string">'./src/sidebar.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Content <span class="token keyword">from</span> <span class="token string">'./src/content.js'</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Sidebar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="webpack初体验"><a href="#webpack初体验" aria-hidden="true" class="header-anchor">#</a> webpack初体验</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>不建议跟随此小结一起安装，此次示例仅仅作为一个例子，详细学习步骤请直接阅读下一章节《安装》</p></div> <h4 id="生成package-json文件"><a href="#生成package-json文件" aria-hidden="true" class="header-anchor">#</a> 生成package.json文件</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>-y</code>参数表示直接生成默认配置项的<code>package.json</code>文件</p></div> <div class="language- extra-class"><pre class="language-text"><code>npm init -y
</code></pre></div><p><img src="/blog/assets/img/1.d7aeccce.png" alt="package.json文件"></p> <h4 id="安装webpack"><a href="#安装webpack" aria-hidden="true" class="header-anchor">#</a> 安装webpack</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>-D</code>参数代表在本项目下安装<code>webpack</code>，它是<code>--save-dev</code>的简写</p></div> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack webpack-cli -D
</code></pre></div><h4 id="修改代码"><a href="#修改代码" aria-hidden="true" class="header-anchor">#</a> 修改代码</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>webpack</code>默认打包路径到<code>dist</code>文件夹，打包后的<code>.js</code>文件名字叫<code>main.js</code></p></div> <p>其他代码不动，将<code>index.html</code>中的<code>.js</code>文件改成如下引用方式</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./dist/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="webpack打包"><a href="#webpack打包" aria-hidden="true" class="header-anchor">#</a> webpack打包</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ol><li><code>npx webpack</code>代表在本项目下寻找<code>webpack打包命令</code>，它区别于<code>npm</code>命令</li> <li><code>index.js</code>参数代表本次打包的入口是<code>index.js</code></li></ol></div> <div class="language- extra-class"><pre class="language-text"><code>npx webpack index.js
</code></pre></div><p><img src="data:image/png;base64,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" alt="webpack打包结果"></p> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <div class="tip custom-block"><p class="custom-block-title">依赖</p> <p>在安装<code>webpack</code>之前，推荐安装<code>Node.js</code>最新版本，新版<code>webpack4.0+</code>利用了许多新版<code>Node.js</code>的新功能，它能有效提升<code>webpack</code>的打包速度。</p></div> <h3 id="全局安装"><a href="#全局安装" aria-hidden="true" class="header-anchor">#</a> 全局安装</h3> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>如果你只是想做一个<code>webpack</code>的Demo案例，那么全局安装方法可能会比较适合你。如果你是在实际生产开发中使用，那么推荐你使用本地安装方法。</p></div> <h4 id="全局安装命令"><a href="#全局安装命令" aria-hidden="true" class="header-anchor">#</a> 全局安装命令</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>webpack4.0+</code>的版本，必须安装<code>webpack-cli</code>，<code>-g</code>命令代表全局安装的意思</p></div> <div class="language-git extra-class"><pre class="language-git"><code>npm install webpack webpack-cli -g
</code></pre></div><h3 id="卸载"><a href="#卸载" aria-hidden="true" class="header-anchor">#</a> 卸载</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>通过<code>npm install</code>安装的模块，对应的可通过<code>npm uninstall</code>进行卸载</p></div> <div class="language-js extra-class"><pre class="language-js"><code>npm uninstall webpack webpack<span class="token operator">-</span>cli <span class="token operator">-</span>g
</code></pre></div><h3 id="本地安装-推荐"><a href="#本地安装-推荐" aria-hidden="true" class="header-anchor">#</a> 本地安装(推荐)</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本地安装的<code>webpack</code>意思是，只在你当前项目下有效。而通过全局安装的<code>webpack</code>，如果两个项目的<code>webpack</code>主版本不一致，则可能会造成其中一个项目无法正常打包。本地安装方式也是实际开发中推荐的一种
<code>webpack</code>安装方式。</p></div> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack webpack-cli -D 或者 npm install webpack webpack-cli --save-dev
</code></pre></div><h3 id="版本号安装"><a href="#版本号安装" aria-hidden="true" class="header-anchor">#</a> 版本号安装</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>如果你对<code>webpack</code>的具体版本有严格要求，那么可以先去github的<code>webpack</code>官网查看历史版本记录或者使用<code>npm view webpack versions</code>查看<code>webpack</code>的<code>npm</code>历史版本记录</p></div> <div class="language- extra-class"><pre class="language-text"><code>// 查看webpack的历史版本记录
npm view webpack versions

// 按版本号安装
npm install webpack@4.25.0 -D
</code></pre></div><p><img src="/blog/assets/img/1.d7aeccce.png" alt="查看历史版本记录"></p> <h2 id="起步"><a href="#起步" aria-hidden="true" class="header-anchor">#</a> 起步</h2> <h3 id="创建项目目录"><a href="#创建项目目录" aria-hidden="true" class="header-anchor">#</a> 创建项目目录</h3> <p>创建项目主目录：<code>webpack-vuepress</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>mkdir webpack<span class="token operator">-</span>vuepress
</code></pre></div><p>创建<code>package.json</code>文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>npm init <span class="token operator">-</span>y
</code></pre></div><p>创建<code>index.html</code>页面：</p> <div class="language-js extra-class"><pre class="language-js"><code>touch index<span class="token punctuation">.</span>html
</code></pre></div><p>创建<code>index.js</code>文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>touch index<span class="token punctuation">.</span>js
</code></pre></div><p>安装后的项目目录如下图所示：
<img src="data:image/png;base64,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" alt="安装目录"></p> <h3 id="添加基础代码"><a href="#添加基础代码" aria-hidden="true" class="header-anchor">#</a> 添加基础代码</h3> <p>改写<code>index.html</code>页面代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这是最原始的网页内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 引用打包后的js文件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./bundle/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>改写<code>index.js</code>文件代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello,world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="安装webpck"><a href="#安装webpck" aria-hidden="true" class="header-anchor">#</a> 安装webpck</h3> <div class="tip custom-block"><p class="custom-block-title">技巧</p> <p>如果需要安装指定版本的<code>webpack</code>，可以使用<code>npm view webpack version</code>命令来查看<code>webpack</code>的历史版本记录。</p></div> <p>运行如下命令安装<code>webpack4.0+</code>和<code>webpack-cli</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack webpack-cli -D
</code></pre></div><h3 id="添加配置文件"><a href="#添加配置文件" aria-hidden="true" class="header-anchor">#</a> 添加配置文件</h3> <p>使用如下命令添加<code>webpack.config.js</code>配置文件：</p> <div class="language- extra-class"><pre class="language-text"><code>touch webpack.config.js
</code></pre></div><p>使用此命令后，项目目录大概如下图所示：
<img src="data:image/png;base64,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" alt="添加webpack配置文件后的项目目录"></p> <p>改写<code>webpack.config.js</code>文件，如下：</p> <div class="tip custom-block"><p class="custom-block-title">解释</p> <ol><li><code>entry</code>配置项说明了<code>webpack</code>打包的入口文件。</li> <li><code>output</code>配置项说明了<code>webpack</code>输出配置：<code>filename</code>配置了打包后的文件叫<code>bundle.js</code>，<code>path</code>配置了打包后的输出目录为<code>bundle</code>文件夹下</li></ol></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'bundle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="改写package-json文件"><a href="#改写package-json文件" aria-hidden="true" class="header-anchor">#</a> 改写package.json文件</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ol><li>添加<code>private</code>属性并设置为<code>true</code>：此属性能让我们的项目为私有的，防止意外发布代码</li> <li>移除<code>main</code>属性：我们的项目并不需要对外暴露一个入口文件</li> <li>添加<code>scripts</code>命令：即我们的打包命令</li></ol></div> <p>改写后的<code>package.json</code>文件如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-vuepress&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;bundle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.29.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="第一次打包"><a href="#第一次打包" aria-hidden="true" class="header-anchor">#</a> 第一次打包</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>npm run</code>代表运行一个脚本命令，而<code>bundle</code>就是我们配置的打包命令，即<code>npm run bundle</code>就是我们配置的<code>webpack</code>打包命令。</p></div> <p>运行如下命令进行项目打包：</p> <div class="language- extra-class"><pre class="language-text"><code>npm run bundle
</code></pre></div><p>打包后的效果如下所示：
<img src="/blog/assets/img/5.ac706ada.png" alt="第一次打包后的效果"></p> <p>打包后的项目目录：
<img src="/blog/assets/img/7.52a5778f.png" alt="第一次打包后的效果"></p> <p>在浏览器中运行<code>index.html</code> <img src="data:image/png;base64,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" alt="第一次打包后的效果"></p> <h3 id="理解webpack打包输出"><a href="#理解webpack打包输出" aria-hidden="true" class="header-anchor">#</a> 理解webpack打包输出</h3> <p>在上一节中，我们第一次运行了一个打包命令，它在控制台上有一些输出内容，这一节我们详细来介绍这些输出内容：
<img src="/blog/assets/img/5.ac706ada.png" alt="第一次打包后的效果"></p> <ol><li><p><strong>Hash：</strong> <code>hash</code>代表本次打包的唯一<code>hash</code>值，每一次打包此值都是不一样的</p></li> <li><p><strong>Version：</strong> 详细展示了我们使用<code>webpack</code>的版本号</p></li> <li><p><strong>Time：</strong> 代表我们本次打包的耗时</p></li> <li><p><strong>Assets：</strong> 代表我们打包出的文件名称</p></li> <li><p><strong>Size：</strong> 代表我们打包出的文件的大小</p></li> <li><p><strong>Chunks：</strong> 代表打包后的<code>.js</code>文件对应的<code>id</code>，<code>id</code>从<code>0</code>开始，依次往后<code>+1</code></p></li> <li><p><strong>Chunks Names：</strong> 代表我们打包后的<code>.js</code>文件的名字，至于为何是<code>main</code>，而不是其他的内容，这是因为在我们的<code>webpack.config.js</code>中，<code>entry:'./index.js'</code>是对如下方式的简写形式：</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// entry: './index.js',</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="8"><li><p><strong>Entrypoint main = bundle.js：</strong> 代表我们打包的入口为<code>main</code></p></li> <li><p><strong>warning in configuration：</strong> 提示警告，意思是我们没有给<code>webpack.config.js</code>设置<code>mode</code>属性，<code>mode</code>属性有三个值：<code>development</code>代表开发环境、<code>production</code>代表生产环境、<code>none</code>代表既不是开发环境也不是生产环境。如果不写的话，默认是生产环境，可在配置文件中配置此项，配置后将不会再出现此警告。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// entry: './index.js',</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/8.3662d801.png" alt="配置Mode属性"></p> <h2 id="打包静态资源"><a href="#打包静态资源" aria-hidden="true" class="header-anchor">#</a> 打包静态资源</h2> <h3 id="什么是loader"><a href="#什么是loader" aria-hidden="true" class="header-anchor">#</a> 什么是loader</h3> <div class="tip custom-block"><p class="custom-block-title">概念</p> <p>loader是一种打包规则，它告诉了<code>webpack</code>在遇到非<code>.js</code>文件时，应该如何处理这些文件，<code>loader</code>有几种运用规则，如下所示：</p> <ul><li>使用<code>test</code>正则来匹配相应的文件</li> <li>使用<code>use</code>来添加文件对应的<code>loader</code></li> <li>对于多个<code>loader</code>而言，从右到左依次调用</li></ul></div> <p><code>loader</code>有很多类型，常用的<code>loader</code>按功能可划分如下形式：</p> <ul><li>文件<code>loader</code></li> <li><code>JSON loader</code></li> <li>转译<code>loader</code></li> <li>模板<code>loader</code></li> <li>样式<code>loader</code></li> <li>代码检查和测试<code>loader</code></li> <li>框架<code>loader</code></li></ul> <p><strong>文件 loader：</strong></p> <ol><li><strong><code>raw-loader</code></strong>：加载文件的原始内容(utf-8)</li> <li><strong><code>val-loader</code></strong>: 将代码作为模块执行，并将<code>exports</code>转换为<code>js</code>代码</li> <li><strong><code>file-loader</code></strong>: 将文件移动到指定文件夹下，并返回一个相对URL</li> <li><strong><code>url-loader</code></strong>：与<code>file-loader</code>功能类似，不过当设置此<code>loader</code>的一些限制时(limit)，它会返回<code>data URL</code></li> <li><strong><code>ref-loader</code></strong>: 手动创建所有文件之间的依赖关系</li></ol> <p><strong>JSON loader：</strong></p> <ol><li><strong><code>json-loader</code></strong>：用来加载<code>.json</code>文件</li> <li><strong><code>json5-loader</code></strong>: 用来加载<code>.json5</code>文件</li> <li><strong><code>cson-loader</code></strong>: 用来加载和转译<code>.cson</code>文件</li></ol> <p><strong>转译 loader：</strong></p> <ol><li><strong><code>script-loader</code></strong>：在全局上下文中执行一次 JavaScript 文件（如在 script 标签），不需要解析</li> <li><strong><code>babel-loader</code></strong>：加载 ES2015+ 代码，然后使用 Babel 转译为 ES5</li> <li><strong><code>ts-loader</code></strong>：像 JavaScript 一样加载 TypeScript 2.0+</li></ol> <p><strong>模板 loader：</strong></p> <ol><li><strong><code>html-loader</code></strong>：导出 HTML 为字符串，需要引用静态资源</li> <li><strong><code>markdown-loader</code></strong>：将 Markdown 转译为 HTML</li></ol> <p><strong>样式 loader：</strong></p> <ol><li><strong><code>style-loader</code></strong>：将模块的导出作为样式添加到 DOM 中</li> <li><strong><code>css-loader</code></strong>：解析 CSS 文件后，使用 import 加载，并且返回 CSS 代码</li> <li><strong><code>less-loader</code></strong>：加载和转译 LESS 文件</li> <li><strong><code>sass-loader</code></strong>：加载和转译 SASS/SCSS 文件</li> <li><strong><code>stylus-loader</code></strong>：加载和转译 Stylus 文件</li></ol> <p><strong>代码检查 loader：</strong></p> <ol><li><strong><code>eslint-loader</code></strong>：使用 ESLint 清理代码</li> <li><strong><code>jslint-loader</code></strong>：使用 JSHint 清理代码</li></ol> <p><strong>框架 loader：</strong></p> <ol><li><strong><code>vue-loader</code></strong>：加载和转译 Vue 组件</li> <li><strong><code>angular2-template-loader</code></strong>：加载和转译 Angular 组件</li></ol> <h3 id="打包图片"><a href="#打包图片" aria-hidden="true" class="header-anchor">#</a> 打包图片</h3> <div class="tip custom-block"><p class="custom-block-title">技巧</p> <p>打包图片需要用到<code>file-loader</code>或者<code>url-loader</code>，需使用<code>npm install</code>进行安装</p></div> <h4 id="添加打包图片规则"><a href="#添加打包图片规则" aria-hidden="true" class="header-anchor">#</a> 添加打包图片规则</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>改写<code>webpack.config.js</code>配置文件，如下所示</p></div> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="改写index-js"><a href="#改写index-js" aria-hidden="true" class="header-anchor">#</a> 改写<code>index.js</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="打包后的项目目录"><a href="#打包后的项目目录" aria-hidden="true" class="header-anchor">#</a> 打包后的项目目录</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span>
<span class="token operator">|</span><span class="token operator">--</span> avatar<span class="token punctuation">.</span>jpg
<span class="token operator">|</span><span class="token operator">--</span> bundle
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bd7a45571e4b5ccb8e7c33b7ce27070a<span class="token punctuation">.</span>jpg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bundle<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><h4 id="打包结果"><a href="#打包结果" aria-hidden="true" class="header-anchor">#</a> 打包结果</h4> <p><img src="/blog/assets/img/9.ab9afd2c.png" alt="打包结果"></p> <h4 id="运用占位符"><a href="#运用占位符" aria-hidden="true" class="header-anchor">#</a> 运用占位符</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>再次改写<code>webpack.config.js</code>文件，运用文件占位符，规则如下：</p> <ul><li><code>[name]</code>代表原本文件的名字</li> <li><code>[ext]</code>代表原本文件的后缀</li> <li><code>[hash]</code>代表一个<code>md5</code>的唯一编码</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包后的目录：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span>
<span class="token operator">|</span><span class="token operator">--</span> avatar<span class="token punctuation">.</span>jpg
<span class="token operator">|</span><span class="token operator">--</span> bundle
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> avatar_bd7a45571e4b5ccb8e7c33b7ce27070a<span class="token punctuation">.</span>jpg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bd7a45571e4b5ccb8e7c33b7ce27070a<span class="token punctuation">.</span>jpg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bundle<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><h3 id="打包样式文件"><a href="#打包样式文件" aria-hidden="true" class="header-anchor">#</a> 打包样式文件</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>样式文件分为几种情况，每一种都需要不同的<code>loader</code>来处理：</p> <ol><li>普通<code>.css</code>文件，使用<code>style-loader</code>和<code>css-loader</code>来处理</li> <li><code>.less</code>文件，使用<code>less-loader</code>来处理</li> <li><code>.sass或者.scss</code>文件，需要使用<code>sass-loader</code>来处理</li> <li><code>.styl</code>文件，需要使用<code>stylus-loader</code>来处理</li></ol></div> <h4 id="打包-css文件"><a href="#打包-css文件" aria-hidden="true" class="header-anchor">#</a> 打包.css文件</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>首先安装<code>style-loader</code>和<code>css-loader</code></p></div> <p><strong>改写webpack配置文件</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>创建index.css：</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js文件：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>打包结果：</strong> <img src="/blog/assets/img/10.93e887ca.png" alt="css打包结果"></p> <h4 id="打包-sass文件"><a href="#打包-sass文件" aria-hidden="true" class="header-anchor">#</a> 打包.sass文件</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>需要安装<code>sass-loader</code>和<code>node-sass</code></p></div> <p><strong>改写webpack配置文件：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(sass|scss)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>添加index-scss.scss文件</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span><span class="token punctuation">{</span>
  <span class="token selector">.avatar-sass</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index-sass.sass'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'avatar-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>打包结果</strong> <img src="/blog/assets/img/11.ac892a55.png" alt="打包结果"></p> <h4 id="自动添加css厂商前缀"><a href="#自动添加css厂商前缀" aria-hidden="true" class="header-anchor">#</a> 自动添加css厂商前缀</h4> <p>当我们在css文件中写一些需要处理兼容性的样式的时候，需要我们分别对于不同的浏览器书添加不同的厂商前缀，使用<code>postcss-loader</code>可以帮我们在<code>webpack</code>打包的时候自动添加这些厂商前缀。</p> <p><strong>修改index.scss</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar-sass</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>50px,50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>安装postcss-loader和autoprefixer</strong></p> <div class="language- extra-class"><pre class="language-text"><code>npm install postcss-loader autoprefixer -D
</code></pre></div><p><strong>修改webpack.config.js</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(sass|scss)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">,</span><span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>添加postcss.config.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>添加<code>postcss.config.js</code>后项目的目录如下所示</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> avatar<span class="token punctuation">.</span>jpg
<span class="token operator">|</span><span class="token operator">--</span> bundle
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> avatar_bd7a45571e4b5ccb8e7c33b7ce27070a<span class="token punctuation">.</span>jpg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bd7a45571e4b5ccb8e7c33b7ce27070a<span class="token punctuation">.</span>jpg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> bundle<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token operator">-</span>scss<span class="token punctuation">.</span>scss
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token operator">-</span>styl<span class="token punctuation">.</span>styl
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>css
<span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><p><strong>打包运行</strong> <img src="/blog/assets/img/12.c47b1155.png" alt="打包运行结果"></p> <h4 id="模块化打包-css文件"><a href="#模块化打包-css文件" aria-hidden="true" class="header-anchor">#</a> 模块化打包.css文件</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>css文件的模块化打包的概念是：除非我主动引用你的样式，否则你打包的样式不能影响到我。</p></div> <p><strong>添加createAvatar.js文件</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">CreateAvatar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'avatar-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createAvatar <span class="token keyword">from</span> <span class="token string">'./createAvatar'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index-scss.scss'</span><span class="token punctuation">;</span>

<span class="token function">createAvatar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'avatar-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>打包运行</strong> <img src="/blog/assets/img/13.b80ad718.png" alt="打包运行"></p> <p>我们可以看到，在<code>createAvatar.js</code>中，我们写的<code>img</code>标签的样式，它受<code>index-scss.scss</code>样式文件的影响，如果要消除这种影响，需要我们开启对css样式文件的模块化打包。</p> <p><strong>改写webpack.config.js</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(sass|scss)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">,</span><span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> avatar <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createAvatar <span class="token keyword">from</span> <span class="token string">'./createAvatar'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> style <span class="token keyword">from</span>  <span class="token string">'./index-scss.scss'</span><span class="token punctuation">;</span>

<span class="token function">createAvatar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">[</span><span class="token string">'avatar-sass'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>打包结果</strong> <img src="/blog/assets/img/14.a4386b37.png" alt="打包结果"></p> <h2 id="webpack核心"><a href="#webpack核心" aria-hidden="true" class="header-anchor">#</a> Webpack核心</h2> <h3 id="使用webpackplugin"><a href="#使用webpackplugin" aria-hidden="true" class="header-anchor">#</a> 使用WebpackPlugin</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>plugin</code>的作用是：当<code>webpack</code>运行到某一个阶段时，可以使用<code>plugin</code>来帮我们做一些事情。</p></div> <p>在使用<code>plugin</code>之前，我们先来改造一下我们的代码，首先删掉无用的文件，随后把<code>index.js</code>移动到<code>src</code>文件夹下。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> dist
<span class="token operator">|</span>   <span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><p>接下来再来清空一下<code>index.js</code>文件的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'hello,world'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最后我们来清理一下我们的<code>webpack.config.js</code>文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="html-webpack-plugin"><a href="#html-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> html-webpack-plugin</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>html-webpack-plugin</code>可以让我们使用固定的模板，再每次打包的时候自动生成一个<code>index.html</code>文件，并且它会自动帮我们引入我们打包后的<code>.js</code>文件</p></div> <p><strong>安装html-webpack-plugin</strong></p> <div class="language- extra-class"><pre class="language-text"><code>npm install html-webpack-plugin -D
</code></pre></div><p><strong>在src目录下创建index.html模板文件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Html 模板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>改写webpack.config.js</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包并运行bundle文件夹下的index.html页面</strong> <img src="/blog/assets/img/15.b63a52f1.png" alt="打包结果"></p> <h4 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" aria-hidden="true" class="header-anchor">#</a> clean-webpack-plugin</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>clean-webpack-plugin</code>能帮我们在打包之前自动删除打包目录以及打包目录下的所有文件</p></div> <p><strong>安装clean-webpack-plugin</strong></p> <div class="language- extra-class"><pre class="language-text"><code>npm install clean-webpack-plugin -D
</code></pre></div><p><strong>改写webpack.config.js配置文件</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'dist.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包结果</strong><br>
在运行打包命令后，自行在项目目录中观察</p> <h3 id="配置sourcemap"><a href="#配置sourcemap" aria-hidden="true" class="header-anchor">#</a> 配置SourceMap</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>source-map</code>是一种映射关系，它映射了打包后的代码和源代码之间的对应关系，一般通过<code>devtool</code>来配置。在开发环境中，推荐将<code>devtool</code>设置成<code>cheap-module-eval-source-map</code>，而在生产环境中，推荐将<code>devtool</code>设置成<code>cheap-module-source-map</code></p></div> <p><strong>devtool各个属性的解释以及打包速度：</strong> <img src="/blog/assets/img/16.495d7697.png" alt="devtool">;</p> <h3 id="使用webpackdevserver"><a href="#使用webpackdevserver" aria-hidden="true" class="header-anchor">#</a> 使用WebpackDevServer</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>webpack-dev-server</code>能帮助我们在源代码更改的情况下，自动帮我们打包我们的代码并启动一个小型的服务器。如果与热更新一起使用，它更能帮助我们高效的开发。</p></div> <h4 id="使用watch参数自动打包"><a href="#使用watch参数自动打包" aria-hidden="true" class="header-anchor">#</a> 使用watch参数自动打包</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>--watch</code>参数能帮我们在源代码更改的情况下，虽然能自动打包，但我们必须得手动刷新浏览器，而且它不能帮我们开启一个小型的服务器。</p></div> <p><strong>改写package.json</strong>：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-vuepress&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;bundle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;watch&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^9.4.10&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.1.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node-sass&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.11.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^7.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.23.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.29.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>npm run watch打包：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>npm run watch
</code></pre></div><p><strong>打包结果：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>$ npm run watch
<span class="token operator">&gt;</span> webpack<span class="token operator">-</span>vuepress@<span class="token number">1.0</span><span class="token number">.0</span> watch <span class="token constant">F</span><span class="token punctuation">:</span>\webpack\webpack<span class="token operator">-</span>vuepress
<span class="token operator">&gt;</span> webpack <span class="token operator">--</span>watch
webpack is watching the files…
Hash<span class="token punctuation">:</span> b051bf9c5cbc09e334ef
Version<span class="token punctuation">:</span> webpack <span class="token number">4.29</span><span class="token number">.6</span>
Time<span class="token punctuation">:</span> <span class="token number">332</span>ms
Built at<span class="token punctuation">:</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">06</span><span class="token punctuation">:</span><span class="token number">28</span>
      Asset       Size  Chunks             Chunk Names
    dist<span class="token punctuation">.</span>js   <span class="token number">3.78</span> KiB    main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
dist<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">3.6</span> KiB    main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
 index<span class="token punctuation">.</span>html  <span class="token number">338</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> dist<span class="token punctuation">.</span>js dist<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>index<span class="token punctuation">.</span>js<span class="token punctuation">]</span> <span class="token number">28</span> bytes <span class="token punctuation">{</span>main<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
Child html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token keyword">for</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">:</span>
</code></pre></div><h4 id="使用webpack-dev-server打包"><a href="#使用webpack-dev-server打包" aria-hidden="true" class="header-anchor">#</a> 使用webpack-dev-server打包</h4> <p><strong>修改package.json文件：</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-vuepress&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;bundle&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;watch&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;keywords&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;author&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^9.4.10&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^2.1.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;node-sass&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.11.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;sass-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^7.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.23.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^1.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^4.29.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-cli&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;^3.2.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>修改webpack.config.js：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 启动bundle文件夹</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./bundle'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口3000</span>
    port<span class="token punctuation">:</span> <span class="token number">3000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'dist.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包结果：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>$ npm run dev
<span class="token operator">&gt;</span> webpack<span class="token operator">-</span>vuepress@<span class="token number">1.0</span><span class="token number">.0</span> dev <span class="token constant">F</span><span class="token punctuation">:</span>\webpack\webpack<span class="token operator">-</span>vuepress
<span class="token operator">&gt;</span> webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server
i ｢wds｣<span class="token punctuation">:</span> Project is running at http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token regex">/localhost:3000/</span>
i ｢wds｣<span class="token punctuation">:</span> webpack output is served <span class="token keyword">from</span> <span class="token operator">/</span>
i ｢wds｣<span class="token punctuation">:</span> Content not <span class="token keyword">from</span> webpack is served <span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token operator">/</span>bundle
i ｢wdm｣<span class="token punctuation">:</span> wait until bundle finished<span class="token punctuation">:</span> <span class="token operator">/</span>
i ｢wdm｣<span class="token punctuation">:</span> Hash<span class="token punctuation">:</span> <span class="token number">752</span>df284a4aadbd70bd7
Version<span class="token punctuation">:</span> webpack <span class="token number">4.29</span><span class="token number">.6</span>
Time<span class="token punctuation">:</span> <span class="token number">606</span>ms
Built at<span class="token punctuation">:</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">07</span>
      Asset       Size  Chunks             Chunk Names
    dist<span class="token punctuation">.</span>js    <span class="token number">334</span> KiB    main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
dist<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map    <span class="token number">385</span> KiB    main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
 index<span class="token punctuation">.</span>html  <span class="token number">338</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> dist<span class="token punctuation">.</span>js dist<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
</code></pre></div><h3 id="模块热更新-hmr"><a href="#模块热更新-hmr" aria-hidden="true" class="header-anchor">#</a> 模块热更新(HMR)</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>HMR模块热更新能够让我们在不刷新浏览器的情况下，替换我们最新的代码。</p></div> <p><strong>修改webpack.config.js：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 启动bundle文件夹</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./bundle'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口3000</span>
    port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 模块热更新</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'dist.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'bundle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="在css中的模块热更新"><a href="#在css中的模块热更新" aria-hidden="true" class="header-anchor">#</a> 在css中的模块热更新</h4> <p><strong>改写index.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'新增'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>

btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'item'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>创建style.css</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div:nth-of-type(odd)</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包：</strong></p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>item</code>的div是动态生成的，当我们改变<code>style.css</code>里面的代码时，模块热更新能帮我们在不刷新浏览器的情况下，替换掉样式的内容。</p></div> <div class="language-js extra-class"><pre class="language-js"><code>npm run dev
</code></pre></div><p><img src="/blog/assets/img/17.4460b1ce.png" alt="打包结果"></p> <h4 id="在js中的模块热更新"><a href="#在js中的模块热更新" aria-hidden="true" class="header-anchor">#</a> 在js中的模块热更新</h4> <p><strong>添加counter.js和number.js</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// counter.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'counter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// number.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'1000'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">'./number'</span><span class="token punctuation">;</span>
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>这部分代码虽然在<code>webpack.config.js</code>文件中配置了HMR，但是并不能做到模块热更新，还需要额外的写一点代码。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> number <span class="token keyword">from</span> <span class="token string">'./number'</span><span class="token punctuation">;</span>
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 额外的模块HMR配置</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./number.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>模块热更新结果：</strong> 在初始化打开页面时，<code>number.js</code>中的<code>innerHTML</code>为1000，再次修改<code>number.js</code>中的<code>innerHTML</code>为122222000，模块热更新成功。
<img src="/blog/assets/img/25.d79ee3b0.png" alt="模块热更新结果"></p> <div class="tip custom-block"><p class="custom-block-title">思考</p> <p>为什么在书写<code>.css</code>样式时，不用写<code>module.hot</code>，而自己写的<code>.js</code>还要额外的写这些代码？<br></p></div> <p>这是因为，在写<code>.css</code>文件时，<code>css-loader</code>已经帮我们书写了<code>module.hot</code>，我们直接使用<code>css-loader</code>即可实现HMR。相同的道理，在变更<code>.vue</code>文件时也不用写<code>module.hot</code>，这是因为<code>vue-loader</code>已经帮我们写了。</p> <h3 id="处理es6语法"><a href="#处理es6语法" aria-hidden="true" class="header-anchor">#</a> 处理ES6语法</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>我们在项目中书写的<code>ES6</code>代码，由于考虑到低版本浏览器的兼容性问题，需要把<code>ES6</code>代码转换成低版本浏览器能够识别的<code>ES5</code>代码。使用<code>babel-loader</code>和<code>@babel/core</code>来进行<code>ES6</code>和<code>ES5</code>之间的链接，使用<code>@babel/preset-env</code>来进行<code>ES6</code>转<code>ES5</code></p></div> <p><strong>清理项目目录：</strong></p> <ul><li>删除<code>counter.js</code>文件</li> <li>删除<code>number.js</code>文件</li> <li>删除<code>style.css</code>文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> bundle
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><p><strong>安装必要包：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 安装 babel-loader @babel/core</span>
npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core

<span class="token comment">// 安装 @babel/preset-env</span>
npm install @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env <span class="token operator">--</span>save<span class="token operator">-</span>dev

<span class="token comment">// 安装 @babel/polyfill进行ES5代码补丁</span>
</code></pre></div><p><strong>改写index.js文件：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'@babel/polyfill'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>改写webpack.config.js文件：</strong> 添加<code>rules</code>规则</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> 
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
      exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> 
      loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>根目录下添加.babelrc文件：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> bundle
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> dist<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> dist<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">--</span> <span class="token punctuation">.</span>babelrc
<span class="token operator">--</span> webpack<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
</code></pre></div><p><strong>打包结果：</strong> 使用<code>npx webpack</code>打包
<img src="/blog/assets/img/26.388e651d.png" alt="打包结果"></p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>这种方式打包，我们可以看到，由于添加了<code>@babel/polyfill</code>，导致整个转<code>ES6</code>的包都打包到了<code>dist.js</code>文件夹下，导致<code>dist.js</code>文件非常大，我们理想的是我们用到了哪些<code>ES6</code>语法，就帮我们转<code>ES5</code>，没有用到的，就不转。<br>
可以在<code>.babelrc</code>文件中使用属性<code>useBuiltIns:'usage'</code>来进行按需引入打包。</p></div> <p><img src="/blog/assets/img/27.c38b3f54.png" alt="打包结果"></p> <p><strong>更改.babelrc文件：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;useBuiltIns&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;usage&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包结果：</strong> 可以明显看到<code>dist.js</code>变小了，只有86.3kb
<img src="/blog/assets/img/28.9548404f.png" alt="打包结果"></p> <h2 id="webpack进阶"><a href="#webpack进阶" aria-hidden="true" class="header-anchor">#</a> Webpack进阶</h2> <h3 id="tree-shaking"><a href="#tree-shaking" aria-hidden="true" class="header-anchor">#</a> Tree Shaking</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Tree Shaking是一个术语，通常用于描述移除JavaScript中未使用的代码，在开发环境中，Tree Shaking还是会起作用，但未使用的代码依然还进行打包，这是因为保存正确的<code>source-map</code>的缘故。</p></div> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>Tree Shaking 只适用于<code>ES Module</code>语法(既通过<code>export</code>导出，<code>import</code>引入)，因为它依赖于<code>ES Module</code>的静态结构特性。</p></div> <p><strong>添加src/math.js文件：</strong> 定义两个方法并export出去</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>改写index.js：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math'</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>改写webpack.config.js：</strong> 更改 webpack 配置文件，进行 Tree Shaking配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>开发环境下打包结果：</strong> 使用<code>npx webpack</code>进行打包</p> <div class="tip custom-block"><p class="custom-block-title">打包结果分析</p> <p>虽然我们配置了 Tree Shaking，但在开发环境下，我们依然能够看到未使用过的<code>minus</code>方法，以下注释也清晰了说明了这一点，这是因为我们处于开发环境下打包。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token comment">/* harmony export (binding) */</span> 
__webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>__webpack_exports__<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> add<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* unused harmony export minus */</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>生产环境下打包结果：</strong> 将<code>webpack.config.js</code>中的<code>Mode</code>属性，由<code>development</code>改为<code>production</code>，再运行<code>npx webpack</code></p> <div class="tip custom-block"><p class="custom-block-title">打包代码分析</p> <p>这是一段<code>add</code>方法压缩后的代码，我们在打包后的<code>.js</code>文件中，并没有找到<code>minus</code>方法，证明在生产环境下，Tree Shaking 真正起了作用。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>n<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> t<span class="token punctuation">,</span>o<span class="token punctuation">;</span>
  r<span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>
  t<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
  o<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token operator">+</span>o<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="sideeffects"><a href="#sideeffects" aria-hidden="true" class="header-anchor">#</a> SideEffects</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>由于 Tree Shaking作用于所有通过<code>import</code>引入的文件，如果我们引入第三方库，例如：<code>import _ from 'lodash'</code>或者<code>.css</code>文件，例如<code>import './style.css'</code> 时，如果我们不
做限制的话，Tree Shaking将起副作用，<code>SideEffects</code>属性能帮我们解决这个问题：它告诉<code>webpack</code>，我们可以对哪些文件不做 Tree Shaking</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 修改package.json</span>
<span class="token comment">// 如果不希望对任何文件进行此配置，可以设置sideEffects属性值为false</span>
<span class="token comment">// *.css 表示 对所有css文件不做 Tree Shaking</span>
<span class="token comment">// @babael/polyfill 表示 对@babel/polyfill不做 Tree Shaking</span>
<span class="token string">&quot;sideEffects&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;*.css&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;@babel/polyfill&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="区分开发模式和生产模式"><a href="#区分开发模式和生产模式" aria-hidden="true" class="header-anchor">#</a> 区分开发模式和生产模式</h3> <p>像上一节所提到的那样，如果我们要区分 Tree Shaking的开发环境和生产环境，那么我们每次打包的都要去更改相应的 Webpack配置文件
有没有什么办法能让我们少改一点代码呢？</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>区分开发环境和生产环境，最好的办法是把公用配置提取到一个配置文件，生产环境和开发环境只写自己需要的配置，在打包的时候再进行合并即可<br> <strong><code>webpack-merge</code></strong> 可以帮我们做到这个事情。</p></div> <p><strong>新建build/webpack.common.js：</strong> 新建build文件夹，在此文件夹下新建<code>webpack.common.js</code>，提起公共配置到此文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> 
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> 
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> 
        loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span> 
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>新建build/webpack.dev.js：</strong> 保留开发环境独有的配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 启动bundle文件夹</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口3000</span>
    port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 模块热更新</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>新建build/webpack.prod.js：</strong> 保留生产环境独有的配置</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">webpack-merge</p> <p>利用<code>webpack-merge</code>进行文件合并，它需要用 npm 进行安装</p></div> <div class="language-js extra-class"><pre class="language-js"><code>$ npm install webpack<span class="token operator">-</span>merge <span class="token operator">-</span><span class="token constant">D</span>
</code></pre></div><p><strong>再次改造build/webpack.dev.js：</strong> 通过<code>webpack-merge</code>进行文件合并</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 启动bundle文件夹</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./bundle'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口3000</span>
    port<span class="token punctuation">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 模块热更新</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>再次改造build/webpack.prod.js：</strong> 通过<code>webpack-merge</code>进行文件合并</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">'cheap-module-source-map'</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="添加脚本命令"><a href="#添加脚本命令" aria-hidden="true" class="header-anchor">#</a> 添加脚本命令</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>通过更改<code>package.json</code>文件，添加<code>dev</code>和<code>build</code> 两个Script脚本命令</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;dev&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack-dev-server --config ./build/webpack.dev.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;build&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;webpack --config ./build/webpack.prod.js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p> <p>当我们运行<code>npm run build</code>时，dist目录打包到了<code>build</code>文件夹下了，这是因为我们把<code>webpack</code>相关的配置放到了<code>build</code>文件夹下后，并没有做其他配置，<code>webpack</code>会认为<code>build</code>文件夹会是根目录</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> build
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> dist
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>common<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>prod<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">--</span> src
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">--</span> math<span class="token punctuation">.</span>js
</code></pre></div><p><strong>再次修改build/webpack.common.js：</strong> 修改<code>output</code>属性即可</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dist'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包结果：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> build
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>common<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>prod<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> dist
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js<span class="token punctuation">.</span>map
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">--</span> math<span class="token punctuation">.</span>js
</code></pre></div><h3 id="代码分离-codesplitting"><a href="#代码分离-codesplitting" aria-hidden="true" class="header-anchor">#</a> 代码分离(CodeSplitting)</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Code Splitting 的核心是把很大的文件，分离成更小的块，让浏览器进行并行加载。常见的代码分割有三种形式：</p> <ul><li>收到进行分割，例如项目如果用到<code>lodash</code>，则把<code>lodash</code>单独打包成一个文件。</li> <li>同步导入的代码使用<code>webpack</code>配置进行代码分割。</li> <li>异步导入的代码，通过模块中的内联函数调用来分割代码。</li></ul></div> <p><strong>修改index.js代码：</strong> 在使用 npm 安装<code>lodash</code>后，修改<code>index.js</code>文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span><span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="同步导入代码分割"><a href="#同步导入代码分割" aria-hidden="true" class="header-anchor">#</a> 同步导入代码分割</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>在<code>webpack.common.js</code>中配置<code>splitChunks</code>属性即可</p></div> <div class="language-js extra-class"><pre class="language-js"><code>optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>打包结果：</strong> <code>main.js</code>中是我们的业务代码，<code>vendors~main.js</code>是我们的公用库代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> build
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>common<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>prod<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> dist
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> vendors<span class="token operator">~</span>main<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">--</span> math<span class="token punctuation">.</span>js
</code></pre></div><h4 id="异步导入代码分割"><a href="#异步导入代码分割" aria-hidden="true" class="header-anchor">#</a> 异步导入代码分割</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>异步带入的代码，不需要我们进行代码分割，<code>webpack</code>会自动帮我们把第三方库单独打包成一个文件</p></div> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>由于异步带入语法目前并没有得到全面支持，需要通过 npm 安装 <code>@babel/plugin-syntax-dynamic-import</code> 插件来进行转译</p></div> <div class="language-js extra-class"><pre class="language-js"><code>$ npm install @babel<span class="token operator">/</span>plugin<span class="token operator">-</span>syntax<span class="token operator">-</span>dynamic<span class="token operator">-</span><span class="token keyword">import</span> <span class="token operator">-</span><span class="token constant">D</span>
</code></pre></div><p><strong>打包结果：</strong> 使用<code>npm run build</code>进行打包，<code>0.js</code>为第三方库打包的代码，<code>main.js</code>为我们的业务代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> build
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>common<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> webpack<span class="token punctuation">.</span>prod<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> dist
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> <span class="token number">0.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> main<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> postcss<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">--</span> src
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
    <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">--</span> math<span class="token punctuation">.</span>js
</code></pre></div><h3 id="splitchunksplugin配置参数详解"><a href="#splitchunksplugin配置参数详解" aria-hidden="true" class="header-anchor">#</a> SplitChunksPlugin配置参数详解</h3> <p>在上一节中，我们配置了<code>splitChunk</code>属性，它能让我们进行代码分割，其实这是因为 Webpack 底层使用了 <strong><code>splitChunksPlugin</code></strong> 插件。这个插件有很多可以配置的属性，它也有一些默认的配置参数，它的默认配置参数如下所示，我们将在下面为一些常用的配置项做一些说明。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...其它配置项</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span>
      minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="chunks参数"><a href="#chunks参数" aria-hidden="true" class="header-anchor">#</a> chunks参数</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>chunks</code>参数，它告诉<code>webpack</code>应该对哪些模式进行打包，它的参数有三种：</p> <ul><li><code>async</code>，此值为默认值，只有异步导入的代码才会进行代码分割。</li> <li><code>initial</code>，与<code>async</code>相对，只有同步引入的代码才会进行代码分割。</li> <li><code>all</code>，此值可以看做是<code>async</code>和<code>inintal</code>的结合，表示无论是同步的代码还是异步的代码，都能进行代码分割。</li></ul></div> <p><strong>async：</strong> 配置了<code>async</code>，以下同步的代码无法进行代码分割</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// chunks: async 同步的代码不会进行代码分割。</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="minsize-和-maxsize"><a href="#minsize-和-maxsize" aria-hidden="true" class="header-anchor">#</a> minSize 和 maxSize</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>minSize</code>默认值是30000，也就是30kb，当代码超过30kb时，才开始进行代码分割，小于30kb的则不会进行代码分割;与<code>minSize</code>相对的，<code>maxSize</code>默认值为0，为0表示不限制打包后文件的大小，一般这个属性不推荐设置，一定要设置的话，它的意思是：打包后的文件最大不能超过设定的值，超过的话就会进行代码分割。</p></div> <p><strong>写一个很小的math.js文件：</strong> 自己写一个很小的js文件，它小于30kb，以下代码不会进行代码分割</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>引用<code>js</code>文件</strong> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="minchunks"><a href="#minchunks" aria-hidden="true" class="header-anchor">#</a> minChunks</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>默认值为1，表示某个模块复用的次数大于或等于一次，就进行代码分割。</p></div> <p>如果将其设置大于1，例如：<code>minChunks:2</code>，在不考虑其他模块的情况下，以下代码不会进行代码分割：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 配置了minChunks: 2，以下lodash不会进行代码分割，因为只使用了一次 </span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Dell'</span><span class="token punctuation">,</span> <span class="token string">'Lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="maxasyncrequests"><a href="#maxasyncrequests" aria-hidden="true" class="header-anchor">#</a> maxAsyncRequests</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>它的默认值是5，代表在进行异步代码分割时，前五个会进行代码分割，超过五个的不再进行代码分割</p></div> <h4 id="maxinitialrequests"><a href="#maxinitialrequests" aria-hidden="true" class="header-anchor">#</a> maxInitialRequests</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>它的默认值是3，代表在进行同步代码分割时，前三个会进行代码分割，超过三个的不在进行代码分割</p></div> <h4 id="automaticnamedelimiter"><a href="#automaticnamedelimiter" aria-hidden="true" class="header-anchor">#</a> automaticNameDelimiter</h4> <p>这是一个连接符，左边是代码分割的缓存组，右边是打包的入口文件的项，例如<code>vendors~main.js</code></p> <h4 id="cachegroups"><a href="#cachegroups" aria-hidden="true" class="header-anchor">#</a> cacheGroups</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>在进行代码分割时，会把符合条件的放在一组，然后把一组中的所有文件打包在一起，默认配置项中有两个分组，一个是<code>vendors</code>和<code>default</code></p></div> <p><strong>vendors组：</strong> 以下代码的含义是：将所有通过引用<code>node_modules</code>文件夹下的都放在<code>vendors</code>组中</p> <div class="language-js extra-class"><pre class="language-js"><code>vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
  priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>default组：</strong> 默认组，意思是，不符合<code>vendors</code>的分组都将分配在<code>default</code>组中，如果一个文件即满足<code>vendors</code>分组，又满足<code>default</code>分组，那么通过<code>priority</code>的值进行取舍，值最大优先级越高。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
  reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>reuseExistingChunk：</strong> 中文解释是复用已存在的文件。意思是，如果有一个<code>a.js</code>文件，它里面引用了<code>b.js</code>，但我们其他模块又有引用<code>b.js</code>的地方。开启这个配置项后，在打包时会分析，<code>b.js</code>已经打包过了，直接可以复用，不用再次打包。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> a <span class="token keyword">from</span> <span class="token string">'a.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> b <span class="token keyword">from</span> <span class="token string">'b.js'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lazy-loading懒加载"><a href="#lazy-loading懒加载" aria-hidden="true" class="header-anchor">#</a> Lazy Loading懒加载</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><code>Lazy Loading</code>懒加载的概念是，通过异步引入代码，它说的异步，并不是在页面一开始就加在，而是在合适的时机进行加载。</p></div> <p><strong>一个懒加载的例子</strong>：以下代码中的<code>lodash</code>，只有在页面点击的时候才加载。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getComponet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> _ <span class="token punctuation">}</span>  <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'lodash' */</span> <span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getComponet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>element <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>懒加载结果：</strong> <img src="/blog/assets/img/18.4e407686.png" alt="懒加载结果"></p> <h3 id="preloading-和prefetching"><a href="#preloading-和prefetching" aria-hidden="true" class="header-anchor">#</a> PreLoading 和Prefetching</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>在以上<code>Lazy Loading</code>的例子中，只有当我们在页面点击时才会加载<code>lodash</code>，也有一些模块虽然是异步导入的，但我们希望能提前进行加载，<code>PreLoading</code>和<code>Prefetching</code>可以帮助我们实现这一点，但它们还有一个区别在于：<code>Prefetching</code>不会跟随主进程一些下载，而是等到主进程加载完毕，带宽释放后才进行加载，<code>PreLoading</code>会随主进程一起加载。</p></div> <p><strong>新建click.js</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// click.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Dell - Lee'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>添加index.js代码</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Prefetching代码预加载</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'lodash' */</span> <span class="token string">'./click.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>func<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Prefetch结果：</strong> <img src="/blog/assets/img/19.eb4a763c.png" alt="Prefetch结果"></p> <h3 id="打包分析"><a href="#打包分析" aria-hidden="true" class="header-anchor">#</a> 打包分析</h3> <h3 id="css代码分隔"><a href="#css代码分隔" aria-hidden="true" class="header-anchor">#</a> Css代码分隔</h3> <h3 id="webpack和浏览器缓存"><a href="#webpack和浏览器缓存" aria-hidden="true" class="header-anchor">#</a> Webpack和浏览器缓存</h3> <h3 id="shimming"><a href="#shimming" aria-hidden="true" class="header-anchor">#</a> shimming</h3> <h3 id="环境变量的使用"><a href="#环境变量的使用" aria-hidden="true" class="header-anchor">#</a> 环境变量的使用</h3> <h2 id="webpack配置案例"><a href="#webpack配置案例" aria-hidden="true" class="header-anchor">#</a> Webpack配置案例</h2> <h3 id="library打包"><a href="#library打包" aria-hidden="true" class="header-anchor">#</a> Library打包</h3> <h3 id="pwa配置"><a href="#pwa配置" aria-hidden="true" class="header-anchor">#</a> PWA配置</h3> <h3 id="typescript配置"><a href="#typescript配置" aria-hidden="true" class="header-anchor">#</a> TypeScript配置</h3> <h3 id="webpackdevserver请求转发"><a href="#webpackdevserver请求转发" aria-hidden="true" class="header-anchor">#</a> WebpackDevServer请求转发</h3> <h3 id="webpackdevserver单页路由"><a href="#webpackdevserver单页路由" aria-hidden="true" class="header-anchor">#</a> WebpackDevServer单页路由</h3> <h3 id="eslint配置"><a href="#eslint配置" aria-hidden="true" class="header-anchor">#</a> Eslint配置</h3> <h3 id="多页打包"><a href="#多页打包" aria-hidden="true" class="header-anchor">#</a> 多页打包</h3> <h3 id="webpack性能优化"><a href="#webpack性能优化" aria-hidden="true" class="header-anchor">#</a> Webpack性能优化</h3></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog/assets/js/14.4857997b.js" defer></script><script src="/blog/assets/js/3.cc253723.js" defer></script><script src="/blog/assets/js/app.5db508ee.js" defer></script>
  </body>
</html>
